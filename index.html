<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.0.4/dist/tailwind.min.css" rel="stylesheet">
    <style>
        /* Custom styles for the particle effects */
        .aura-container {
            position: relative;
            overflow: hidden;
            background-color: #1a1a1a;
            border-radius: 9999px;
        }

        .particle {
            position: absolute;
            border-radius: 9999px;
            opacity: 0;
            transition: all 0.5s ease-out;
        }

        .particle-explode {
            transition: all 0.05s ease-out;
        }

        .particle-starlight {
            box-shadow: rgba(255, 255, 255, 0.8) 0px 0px 25px;
        }
    </style>
</head>

<body class="bg-gray-950 text-white">

    <div class="min-h-screen p-6">
        <div class="container mx-auto">
            <div class="flex justify-center mb-8">
                <div class="bg-gray-900 p-6 rounded-lg w-full max-w-4xl border border-gray-800">
                    <h1 class="text-2xl font-bold text-white flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 3v4M12 17v4M7 12h4M13 12h4M4.5 19.5L7 16m10 0l2.5 3.5M4.5 4.5L7 7m10 0l2.5-2.5" />
                        </svg>
                        Aura Generator
                    </h1>
                    <div class="flex flex-col items-center gap-6">
                        <div class="flex gap-4">
                            <button id="rollBtn" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded text-white">
                                Roll New Aura
                            </button>
                            <button id="keepBtn" class="border-purple-600 text-purple-600 hover:bg-purple-900 px-4 py-2 rounded">
                                Keep Aura
                            </button>
                            <button id="inventoryBtn"
                                class="border-purple-600 text-purple-600 hover:bg-purple-900 px-4 py-2 rounded">
                                Inventory
                            </button>
                        </div>
                        <div id="auraDisplay" class="text-center mt-6">
                            <!-- Dynamic aura display will go here -->
                        </div>
                    </div>
                </div>
            </div>

            <div id="inventory" class="container mx-auto mt-8" style="display: none;">
                <div class="bg-gray-900 p-6 rounded-lg w-full max-w-4xl border border-gray-800">
                    <h2 class="text-xl font-bold text-white">Inventory</h2>
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mt-4" id="inventoryList">
                        <!-- Inventory items will go here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/uuid.min.js"></script>
    <script>
        const rarityConfigs = {
            common: {
                color: '#ffffff',
                particleCount: 20,
                speed: 1,
                size: 2,
                chance: 0.70,
                glow: '0px 0px 5px',
                radius: 80
            },
            rare: {
                color: '#4287f5',
                particleCount: 30,
                speed: 1.5,
                size: 3,
                chance: 0.20,
                glow: '0px 0px 8px',
                radius: 80
            },
            epic: {
                color: '#9b42f5',
                particleCount: 40,
                speed: 2,
                size: 4,
                chance: 0.06,
                glow: '0px 0px 12px',
                radius: 80
            },
            legendary: {
                color: '#f5a742',
                particleCount: 50,
                speed: 2.5,
                size: 5,
                chance: 0.025,
                glow: '0px 0px 15px',
                radius: 80
            },
            chroma: {
                color: 'rainbow',
                particleCount: 60,
                speed: 3,
                size: 6,
                chance: 0.01,
                glow: '0px 0px 20px',
                radius: 80
            },
            starlight: {
                color: '#ffffff',
                particleCount: 70,
                speed: 3.5,
                size: 4,
                chance: 0.005,
                glow: '0px 0px 25px',
                radius: 80,
                isStarlight: true
            }
        };

        const inventory = JSON.parse(localStorage.getItem('auraInventory')) || [];
        let currentAura = null;

        const rollAura = () => {
            const rand = Math.random();
            let rarity;
            let cumulative = 0;

            for (const [r, config] of Object.entries(rarityConfigs)) {
                cumulative += config.chance;
                if (rand < cumulative) {
                    rarity = r;
                    break;
                }
            }

            const config = rarityConfigs[rarity];
            const pattern = generatePattern(config);

            currentAura = {
                id: uuid.v4(),
                rarity,
                config,
                pattern
            };

            displayAura(currentAura);
        };

        const generatePattern = (config) => {
            return Array.from({ length: config.particleCount }).map(() => ({
                angle: Math.random() * Math.PI * 2,
                radius: Math.random() * 0.5 + 0.5,
                speed: (Math.random() * 0.5 + 0.75) * config.speed,
                phase: Math.random() * Math.PI * 2,
                radiusVariation: Math.random() * 0.2
            }));
        };

        const displayAura = (aura) => {
            const auraContainer = document.getElementById('auraDisplay');
            auraContainer.innerHTML = '';

            const container = document.createElement('div');
            container.classList.add('aura-container');
            container.style.width = '200px';
            container.style.height = '200px';

            aura.pattern.forEach((_, i) => {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.backgroundColor = aura.config.color === 'rainbow'
                    ? `hsl(${Math.random() * 360}, 100%, 50%)`
                    : aura.config.color;
                particle.style.width = `${aura.config.size}px`;
                particle.style.height = `${aura.config.size}px`;
                particle.style.boxShadow = `${aura.config.color} ${aura.config.glow}`;
                container.appendChild(particle);
            });

            auraContainer.appendChild(container);
        };

        const keepAura = () => {
            if (currentAura) {
                inventory.push(currentAura);
                localStorage.setItem('auraInventory', JSON.stringify(inventory));
                displayInventory();
            }
        };

        const displayInventory = () => {
            const inventoryList = document.getElementById('inventoryList');
            inventoryList.innerHTML = '';

            inventory.forEach(aura => {
                const auraItem = document.createElement('div');
                auraItem.classList.add('aura-container', 'p-4', 'bg-gray-800', 'rounded-lg');
                auraItem.style.width = '100px';
                auraItem.style.height = '100px';
                auraItem.innerHTML = `<div class="aura-container" style="background-color: ${aura.config.color};"></div>`;
                inventoryList.appendChild(auraItem);
            });
        };

        const toggleInventory = () => {
            const inventorySection = document.getElementById('inventory');
            inventorySection.style.display = inventorySection.style.display === 'none' ? 'block' : 'none';
        };

        document.getElementById('rollBtn').addEventListener('click', rollAura);
        document.getElementById('keepBtn').addEventListener('click', keepAura);
        document.getElementById('inventoryBtn').addEventListener('click', toggleInventory);

        displayInventory(); // Show the initial inventory
    </script>
</body>

</html>
